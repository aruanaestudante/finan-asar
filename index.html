<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A.R Finan√ßas</title>
<style>
/* Reset e fonte */
* { margin:0; padding:0; box-sizing:border-box; font-family: Arial,sans-serif; }
body, html { height:100%; }

/* Telas */
.screen { display:none; width:100%; height:100%; }
.screen.active { display:block; }

/* Login/Cadastro */
body.login-body { background-color:#0b0f65; color:#0b0f65; }
.login-container { width:400px; margin:50px auto; padding:40px; border-radius:12px; background-color:#fff; color:#0b0f65; box-shadow:0 4px 12px rgba(0,0,0,0.15);}
.login-container h1 { text-align:center; margin-bottom:30px; color:#0b0f65; }
.login-container input, .login-container select { width:100%; padding:12px 15px; margin:10px 0; border-radius:8px; border:1px solid #ccc; font-size:16px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
.login-container button { width:100%; padding:12px; margin-top:15px; border:none; border-radius:8px; background-color:#1e24a0; color:white; font-size:18px; cursor:pointer; transition: all 0.3s ease; }
.login-container button:hover { transform:translateY(-2px); box-shadow:0 4px 6px rgba(0,0,0,0.2); background-color:#353fc0; }
.login-container .register-link { display:block; margin-top:20px; color:#1e24a0; text-decoration:none; text-align:center; }
.login-container .register-link:hover { text-decoration:underline; }

/* Bot√µes */
.btn { display:block; width:250px; padding:15px; margin:15px auto; background-color:#fff; color:#0b0f65; border:none; border-radius:25px; font-size:18px; cursor:pointer; transition: all 0.3s ease; text-decoration:none; }
.btn:hover { transform:translateY(-3px); box-shadow:0 4px 8px rgba(0,0,0,0.2); background-color:#d9d9d9; }

/* Home/Adicionar/Gr√°fico/Conta Casal */
body.home-body { background-color:#fff; color:#0b0f65; }

/* Tela Inicial Centralizada */
#homeScreenInitial .container { display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh; text-align:center; }
#homeScreenInitial .logo { font-size:48px; font-weight:bold; color:#fff; margin-bottom:40px; }

/* Cabe√ßalho */
.home-header { background-color:#0b0f65; display:flex; justify-content:space-between; align-items:center; padding:0 50px; position:sticky; top:0; z-index:1000; height:60px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
.home-header .logo { font-size:26px; color:#fff; font-weight:bold; }
.home-header nav a { color:#fff; margin-left:25px; text-decoration:none; font-weight:bold; cursor:pointer; transition: all 0.3s ease; }
.home-header nav a:hover { color:#ffce56; text-shadow:0 1px 3px rgba(0,0,0,0.3); }

/* Se√ß√µes */
.home-content { padding:40px 5%; max-width:1100px; margin:0 auto; }
.home-content h1 { margin-bottom:15px; font-size:32px; text-align:center; }
.home-content p { margin-bottom:25px; font-size:18px; line-height:1.6; }
.section { margin-top:50px; padding-top:25px; border-top:1px solid #ccc; opacity:0; animation: fadeIn 0.5s forwards; }

/* Fade-in */
@keyframes fadeIn { to { opacity:1; } }

/* Formul√°rios */
form { max-width:400px; margin:20px auto; display:flex; flex-direction:column; }
form input, form select { width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ccc; font-size:16px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
form button { width:100%; padding:12px; background-color:#1e24a0; color:white; border:none; border-radius:8px; cursor:pointer; font-size:16px; transition: all 0.3s ease; }
form button:hover { transform:translateY(-2px); box-shadow:0 4px 6px rgba(0,0,0,0.2); background-color:#353fc0; }

/* Bot√£o Zerar */
#zerarGastos { background-color:#1e24a0; color:white; margin-top:10px; }
#zerarGastos:hover { background-color:#353fc0; }

/* Lista de gastos em bloco reduzida */
.gasto-card { background-color:#f5f5f5; border-radius:8px; padding:6px 10px; margin-bottom:8px; font-size:16px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
#listaGastos, #listaGastosMaria, #listaGastosJoao { margin-top:15px; }

/* Gr√°fico e IA */
#graficoGastos { max-width:300px; margin:20px auto; display:block; }
#mensagemIA { font-size:20px; line-height:1.8; margin-top:30px; text-align:center; white-space:pre-wrap; }

/* Conta casal total */
#totalCasal { font-weight:bold; color:#1e24a0; font-size:20px; text-align:center; display:block; margin-top:10px; }

/* Linha separadora */
.divider { border-top:1px solid #ccc; margin:20px 0; }

</style>
</head>
<body class="login-body">

<!-- Tela Inicial -->
<div id="homeScreenInitial" class="screen active">
    <div class="container">
        <div class="logo">A.R</div>
        <button class="btn" onclick="showScreen('loginScreen')">ENTRAR</button>
        <button class="btn" onclick="showScreen('registerScreen')">CADASTRAR</button>
    </div>
</div>

<!-- Tela Login -->
<div id="loginScreen" class="screen">
    <div class="login-container">
        <h1>Login</h1>
        <input type="text" placeholder="Usu√°rio" />
        <input type="password" placeholder="Senha" />
        <button onclick="entrarHome()">ENTRAR</button>
        <a href="#" class="register-link" onclick="showScreen('registerScreen')">CADASTRAR</a>
        <br><br>
        <button class="btn" onclick="showScreen('homeScreenInitial')">VOLTAR</button>
    </div>
</div>

<!-- Tela Cadastro -->
<div id="registerScreen" class="screen">
    <div class="login-container">
        <h1>Cadastro</h1>
        <input type="text" placeholder="Nome" />
        <input type="email" placeholder="Email" />
        <input type="password" placeholder="Senha" />
        <button onclick="entrarHome()">CADASTRAR</button>
        <br><br>
        <button class="btn" onclick="showScreen('homeScreenInitial')">VOLTAR</button>
    </div>
</div>

<!-- Home -->
<div id="homeScreen" class="screen">
    <header class="home-header">
        <div class="logo">A.R</div>
        <nav>
            <a onclick="showHomeSection('home')">HOME</a>
            <a onclick="showHomeSection('adicionar')">ADICIONAR</a>
            <a onclick="showHomeSection('grafico')">GR√ÅFICO</a>
            <a onclick="showHomeSection('contacs')">CONTA CS</a>
        </nav>
    </header>
    <main class="home-content">

        <!-- HOME -->
        <div id="home" class="home-section">
            <p>Seja bem-vindo ao <strong>A.R Finan√ßas</strong>! üëã</p>
            <p>Controle seus gastos de forma pr√°tica e inteligente. Explore sua conta individual ou <strong>compartilhe com seu parceiro(a)</strong>.</p>
            <p>Veja gr√°ficos de despesas, acompanhe seu hist√≥rico e receba dicas da nossa IA para economizar ainda mais. Vamos <strong>organizar suas finan√ßas</strong> juntos!</p>
            <div class="section">
                <h3>Conta Manual x Autom√°tica:</h3>
                <p>Na autom√°tica, seus gastos s√£o atualizados sozinhos a partir do cart√£o cadastrado ‚Äî praticidade total!</p>
                <p>Na manual, voc√™ adiciona cada gasto por conta pr√≥pria, mantendo controle total sobre suas finan√ßas.</p>
            </div>
            <div class="section">
                <h3>Agradecimento:</h3>
                <p>Obrigado por conferir o A.R Finan√ßas! Estamos felizes em ter voc√™ aqui. Explore, registre seus gastos e acompanhe seus gr√°ficos. Seu feedback √© muito importante pra gente melhorar cada vez mais!</p>
            </div>
        </div>

        <!-- ADICIONAR -->
        <div id="adicionar" class="home-section" style="display:none;">
            <h1 style="text-align:center; margin-bottom:20px;">Adicione seus gastos!</h1>
            <form onsubmit="adicionarGasto(); return false;">
                <input type="text" id="gastoNome" placeholder="O que voc√™ gastou?" required>
                <input type="number" id="gastoValor" placeholder="Valor (R$)" step="0.01" required>
                <select id="gastoCategoria" required>
                    <option value="" disabled selected>Categoria</option>
                    <option value="Lazer">Lazer</option>
                    <option value="Alimenta√ß√£o">Alimenta√ß√£o</option>
                    <option value="Domic√≠lio">Domic√≠lio</option>
                    <option value="Transporte">Transporte</option>
                    <option value="Outros">Outros</option>
                </select>
                <button type="submit">Adicionar</button>
            </form>
            <button id="zerarGastos" onclick="zerarGastos()">Zerar gastos</button>
            <div id="listaGastos"></div>
        </div>

        <!-- GRAFICO -->
        <div id="grafico" class="home-section" style="display:none;">
            <canvas id="graficoGastos"></canvas>
            <div id="mensagemIA"></div>
        </div>

        <!-- CONTA CASAL -->
        <div id="contacs" class="home-section" style="display:none;">
            <form onsubmit="adicionarGastoCasal('Maria'); return false;">
                <h3>Maria</h3>
                <input type="text" id="gastoNomeMariaCasal" placeholder="Gasto">
                <input type="number" id="gastoValorMariaCasal" placeholder="Valor" step="0.01">
                <select id="gastoCategoriaMariaCasal">
                    <option value="" disabled selected>Categoria</option>
                    <option value="Lazer">Lazer</option>
                    <option value="Alimenta√ß√£o">Alimenta√ß√£o</option>
                    <option value="Domic√≠lio">Domic√≠lio</option>
                    <option value="Transporte">Transporte</option>
                    <option value="Outros">Outros</option>
                </select>
                <button type="submit">Adicionar</button>
                <div id="listaGastosMaria"></div>
            </form>

            <div class="divider"></div> <!-- LINHA ENTRE MARIA E JOAO -->

            <form onsubmit="adicionarGastoCasal('Joao'); return false;">
                <h3>Jo√£o</h3>
                <input type="text" id="gastoNomeJoaoCasal" placeholder="Gasto">
                <input type="number" id="gastoValorJoaoCasal" placeholder="Valor" step="0.01">
                <select id="gastoCategoriaJoaoCasal">
                    <option value="" disabled selected>Categoria</option>
                    <option value="Lazer">Lazer</option>
                    <option value="Alimenta√ß√£o">Alimenta√ß√£o</option>
                    <option value="Domic√≠lio">Domic√≠lio</option>
                    <option value="Transporte">Transporte</option>
                    <option value="Outros">Outros</option>
                </select>
                <button type="submit">Adicionar</button>
                <div id="listaGastosJoao"></div>
            </form>
            <span id="totalCasal"></span>
        </div>

    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let chart=null;
let gastos=JSON.parse(localStorage.getItem('gastos'))||[];

/* FUN√á√ïES DE NAVEGA√á√ÉO */
function showScreen(screenId){
    document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
    document.getElementById(screenId).classList.add('active');
}
function entrarHome(){
    showScreen('homeScreen');
    document.body.className='home-body';
}

function showHomeSection(id){
    document.querySelectorAll('.home-section').forEach(s=>s.style.display='none');
    document.getElementById(id).style.display='block';

    // Atualiza gr√°fico somente quando a aba de gr√°fico for aberta
    if(id === 'grafico'){
        atualizarGrafico();
    }
}

/* Adicionar gasto */
function adicionarGasto(){
    const nome=document.getElementById('gastoNome').value.trim();
    const valor=parseFloat(document.getElementById('gastoValor').value);
    const categoria=document.getElementById('gastoCategoria').value;
    if(!nome||isNaN(valor)||valor<=0||!categoria){ alert('Preencha todos os campos!'); return; }
    const data=new Date().toLocaleDateString('pt-BR');
    gastos.push({nome,valor,categoria,data});
    localStorage.setItem('gastos',JSON.stringify(gastos));
    document.getElementById('gastoNome').value='';
    document.getElementById('gastoValor').value='';
    document.getElementById('gastoCategoria').value='';
    mostrarGastos();
    atualizarIA();
}

/* Bot√£o Zerar gastos */
function zerarGastos(){
    if(confirm('Deseja realmente zerar todos os gastos?')){
        gastos=[];
        localStorage.setItem('gastos',JSON.stringify(gastos));
        mostrarGastos();
        atualizarGrafico();
        atualizarIA();
    }
}

function mostrarGastos(){
    const container=document.getElementById('listaGastos');
    container.innerHTML='';
    if(gastos.length===0){ container.innerHTML='Nenhum gasto registrado.'; return; }
    gastos.forEach(g=>{
        const div=document.createElement('div');
        div.className='gasto-card';
        div.innerText=`${g.nome} (R$ ${g.valor.toFixed(2)}) - ${g.categoria} (${g.data})`;
        container.appendChild(div);
    });
}

/* Gr√°fico */
function atualizarGrafico(){
    const categorias={Lazer:0,Domic√≠lio:0,Alimenta√ß√£o:0,Transporte:0,Outros:0};
    gastos.forEach(g=>categorias[g.categoria]+=g.valor);
    const ctx=document.getElementById('graficoGastos').getContext('2d');
    if(chart) chart.destroy();
    chart=new Chart(ctx,{
        type:'pie',
        data:{ labels:Object.keys(categorias), datasets:[{ data:Object.values(categorias), backgroundColor:['#ff6384','#36a2eb','#ffce56','#4bc0c0','#9966ff'] }] },
        options:{ responsive:true, plugins:{legend:{position:'bottom'}} }
    });
}

/* IA din√¢mica */
function atualizarIA(){
    if(gastos.length===0){ document.getElementById('mensagemIA').innerText='Nenhum gasto registrado ainda.'; return; }
    const categoriasTotais={Lazer:0,Domic√≠lio:0,Alimenta√ß√£o:0,Transporte:0,Outros:0};
    gastos.forEach(g=>categoriasTotais[g.categoria]+=g.valor);
    let maiorCategoria='', maiorValor=0;
    for(const cat in categoriasTotais){ if(categoriasTotais[cat]>maiorValor){ maiorValor=categoriasTotais[cat]; maiorCategoria=cat; } }
    let totalGasto=Object.values(categoriasTotais).reduce((a,b)=>a+b,0);
    let texto=`Ol√°! üëã Analisando seus gastos recentes, percebi alguns pontos importantes:\n\n`;
    texto+=`Voc√™ est√° gastando consideravelmente em ${maiorCategoria} (R$ ${maiorValor.toFixed(2)}), que representa ${(maiorValor/totalGasto*100).toFixed(2)}% do seu total.\n\n`;
    texto+=`Aqui v√£o algumas dicas para voc√™ otimizar seus gastos:\n`;
    if(maiorCategoria==='Lazer'){ texto+='‚Ä¢ Tente equilibrar momentos de lazer com atividades gratuitas ou de baixo custo.\n'; }
    if(maiorCategoria==='Alimenta√ß√£o'){ texto+='‚Ä¢ Planeje suas refei√ß√µes e evite gastos desnecess√°rios com lanches fora de casa.\n'; }
    if(maiorCategoria==='Domic√≠lio'){ texto+='‚Ä¢ Verifique despesas fixas e veja se h√° maneiras de reduzir contas ou renegociar servi√ßos.\n'; }
    if(maiorCategoria==='Transporte'){ texto+='‚Ä¢ Prefira transporte p√∫blico ou compartilhe caronas sempre que poss√≠vel.\n'; }
    if(maiorCategoria==='Outros'){ texto+='‚Ä¢ Analise detalhadamente para identificar gastos que podem ser eliminados.\n'; }
    texto+=`\nLembre-se: a organiza√ß√£o financeira √© essencial para alcan√ßar seus objetivos. Continue registrando seus gastos e acompanhe seus gr√°ficos para entender melhor seu padr√£o de consumo.\n`;
    texto+=`Com pequenas mudan√ßas, voc√™ pode economizar significativamente e investir em seus objetivos. üí°`;
    document.getElementById('mensagemIA').innerText=texto;
}
mostrarGastos();
atualizarIA();

/* Conta Casal */
let gastosCasalMaria=JSON.parse(localStorage.getItem('gastosCasalMaria'))||[];
let gastosCasalJoao=JSON.parse(localStorage.getItem('gastosCasalJoao'))||[];
function adicionarGastoCasal(pessoa){
    const data=new Date().toLocaleDateString('pt-BR');
    let nome,valor,categoria,lista;
    if(pessoa==='Maria'){
        nome=document.getElementById('gastoNomeMariaCasal').value.trim();
        valor=parseFloat(document.getElementById('gastoValorMariaCasal').value);
        categoria=document.getElementById('gastoCategoriaMariaCasal').value;
        lista=gastosCasalMaria;
    }else{
        nome=document.getElementById('gastoNomeJoaoCasal').value.trim();
        valor=parseFloat(document.getElementById('gastoValorJoaoCasal').value);
        categoria=document.getElementById('gastoCategoriaJoaoCasal').value;
        lista=gastosCasalJoao;
    }
    if(!nome || isNaN(valor)||valor<=0 || !categoria){ alert('Preencha todos os campos!'); return; }
    lista.push({nome, valor, categoria, data});
    if(pessoa==='Maria') localStorage.setItem('gastosCasalMaria', JSON.stringify(gastosCasalMaria));
    else localStorage.setItem('gastosCasalJoao', JSON.stringify(gastosCasalJoao));
    if(pessoa==='Maria'){ document.getElementById('gastoNomeMariaCasal').value=''; document.getElementById('gastoValorMariaCasal').value=''; document.getElementById('gastoCategoriaMariaCasal').value=''; }
    else{ document.getElementById('gastoNomeJoaoCasal').value=''; document.getElementById('gastoValorJoaoCasal').value=''; document.getElementById('gastoCategoriaJoaoCasal').value=''; }
    mostrarGastosCasal();
}
function mostrarGastosCasal(){
    const listaMaria=gastosCasalMaria.map(g=>`${g.nome} (R$ ${g.valor.toFixed(2)}) - ${g.categoria} (${g.data})`).join('<br>');
    const listaJoao=gastosCasalJoao.map(g=>`${g.nome} (R$ ${g.valor.toFixed(2)}) - ${g.categoria} (${g.data})`).join('<br>');
    document.getElementById('listaGastosMaria').innerHTML=listaMaria||'Nenhum gasto registrado.'; 
    document.getElementById('listaGastosJoao').innerHTML=listaJoao||'Nenhum gasto registrado.'; 
    const total=gastosCasalMaria.reduce((a,g)=>a+g.valor,0)+gastosCasalJoao.reduce((a,g)=>a+g.valor,0);
    document.getElementById('totalCasal').innerText=`Total gasto: R$ ${total.toFixed(2)}`;
}
mostrarGastosCasal();
</script>
</body>
</html>
